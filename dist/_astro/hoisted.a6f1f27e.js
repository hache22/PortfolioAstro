const E={root:null,rootMargin:"0px",threshold:.1},L=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&t.target.classList.add("visible")})},E);document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".scroll-fade").forEach(t=>L.observe(t))});const c=document.getElementById("date-filter"),w=document.querySelectorAll(".cert-row");c&&c.addEventListener("change",()=>{const e=c.value;w.forEach(t=>{const s=t.getAttribute("data-date");e==="all"||e===s?t.style.display="":t.style.display="none"})});const v=document.querySelectorAll(".filter-btn"),x=document.querySelectorAll(".project-card"),S=document.querySelectorAll(".filter-tag");function g(e){x.forEach(t=>{const s=(t.getAttribute("data-tags")||"").split(",");e==="all"||s.includes(e)?t.classList.remove("hidden"):t.classList.add("hidden")})}function h(e){v.forEach(t=>{t.classList.remove("bg-yellow-400","text-black"),t!==e&&t.classList.add("opacity-70")}),e.classList.add("bg-yellow-400","text-black"),e.classList.remove("opacity-70")}v.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-tag");h(e),g(t||"all")})});S.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-tag"),s=Array.from(v).find(n=>n.getAttribute("data-tag")===t);s&&(h(s),g(t||"all"))})});const a=document.getElementById("contact-form"),l=document.getElementById("form-status"),d=a?.querySelector('button[type="submit"]'),u=document.getElementById("loading-spinner"),f=document.getElementById("submit-text");a&&a.addEventListener("submit",async e=>{if(e.preventDefault(),!d||!u||!f)return;d.disabled=!0,u.classList.remove("hidden");const t=new FormData(a),s=Object.fromEntries(t.entries());try{await fetch("https://formsubmit.co/ajax/horaciolaphitz99@gmail.com",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({...s,_subject:"Nuevo mensaje de contacto desde Portfolio",_template:"table",_captcha:!1,_next:"https://hache22.github.io/gracias.html"})}),f.textContent="Mensaje enviado",a.reset(),window.open("https://hache22.github.io/gracias.html","_blank")}catch{A("error","Hubo un error al enviar el mensaje. Por favor, intenta nuevamente."),f.textContent="Enviar"}finally{d.disabled=!1,u.classList.add("hidden")}});function A(e,t){if(!l)return;const s=l.querySelector("div");if(!s)return;s.className=`p-4 rounded-md mb-4 ${e==="success"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-100":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-100"}`;const n=s.querySelector("p");n&&(n.textContent=t),l.classList.remove("hidden"),setTimeout(()=>{l.classList.add("hidden")},5e3)}const j=document.querySelectorAll("[data-card]");let r=null;j.forEach(e=>{e instanceof HTMLElement&&(e.addEventListener("mousemove",t=>{t instanceof MouseEvent&&(r!==null&&cancelAnimationFrame(r),r=requestAnimationFrame(()=>{const s=e.getBoundingClientRect(),n=t.clientX-s.left,o=t.clientY-s.top;e.style.setProperty("--mouse-x",`${n}px`),e.style.setProperty("--mouse-y",`${o}px`)}))}),e.addEventListener("mouseleave",()=>{r!==null&&cancelAnimationFrame(r),e.style.setProperty("--mouse-x","50%"),e.style.setProperty("--mouse-y","50%")}))});let b=window.scrollY;const m=document.getElementById("header");function p(){const e=window.scrollY;if(e<10){m?.classList.remove("-translate-y-full");return}e>b?m?.classList.add("-translate-y-full"):m?.classList.remove("-translate-y-full"),b=e}window.addEventListener("scroll",p,{passive:!0});document.addEventListener("astro:before-swap",()=>{window.removeEventListener("scroll",p)});document.addEventListener("astro:page-load",()=>{const e=document.querySelectorAll("section"),t=document.querySelectorAll("header nav a"),s=o=>{o.forEach(y=>{y.isIntersecting&&t.forEach(i=>{i.getAttribute("aria-label")==y.target.id?i.classList.add("text-blue-500"):i.classList.remove("text-blue-500")})})},n=new IntersectionObserver(s,{root:null,rootMargin:"0px",threshold:.3});e.forEach(o=>{n.observe(o)}),document.onvisibilitychange=()=>{document.visibilityState==="hidden"?n.disconnect():e.forEach(o=>{n.observe(o)})}});window.particlesJS&&window.particlesJS("particles-js",{particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},opacity:{value:.5},size:{value:3},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:6}}});
